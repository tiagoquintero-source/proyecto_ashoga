<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Proveedores</title>
    <link rel="stylesheet" href="proveedores.css" />
  </head>
  <body>
    <header class="main-header">
      <h1 id="welcome">Proveedores</h1>
      <div class="actions">
        <button id="logout">Cerrar sesión</button>
      </div>
    </header>

    <div class="app-shell">
      <nav class="sidebar" aria-label="Navegación principal">
        <ul>
          <li><a href="../menu_principal/menu_principal.html" class="nav-link">Inicio</a></li>
          <li><a href="../inventario/inventario.html" class="nav-link">Inventario</a></li>
          <li><a href="../traslados/traslados.html" class="nav-link">Traslados</a></li>
          <li><a href="../consumos/consumos.html" class="nav-link">Consumos</a></li>
          <li><a href="proveedores.html" class="nav-link">Proveedores</a></li>
        </ul>
      </nav>

      <main class="main-content">
        <section id="view-panel" class="panel" role="region" aria-live="polite">
          <h2 id="view-title">
            <span style="vertical-align:middle;display:inline-block;margin-right:8px;">
              <svg width="22" height="22" fill="none" viewBox="0 0 24 24" style="vertical-align:middle">
                <circle cx="12" cy="12" r="10" fill="#2563eb" opacity="0.12"/>
                <path d="M8 12h8M12 8v8" stroke="#2563eb" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </span>
            Registrar compra
          </h2>
          <div id="view-body">
            <!-- Formulario: Registrar Compra -->
            <form id="compra-form" class="form-beauty">
              <div class="form-row">
                <label style="flex:1">
                  <span>Proveedor</span>
                  <input type="text" id="proveedor" list="proveedores-list" placeholder="Nombre del proveedor" autocomplete="off"/>
                  <datalist id="proveedores-list"></datalist>
                </label>
                <label style="flex:1">
                  <span>Fecha y hora</span>
                  <input type="datetime-local" id="fecha_hora" required />
                </label>
                <label style="flex:1">
                  <span>Destino</span>
                  <select id="destino" required>
                    <option value="General">General</option>
                    <option value="Hotel Saildorf">Hotel Saildorf</option>
                    <option value="Hotel Brit">Hotel Brit</option>
                    <option value="Hotel Costanera">Hotel Costanera</option>
                  </select>
                </label>
              </div>

              <div id="items-container">
                <p class="section-sub">Items</p>
                <div class="item-row">
                  <input type="text" class="item-product" placeholder="Producto" list="productos-list" required />
                  <input type="number" class="item-qty" placeholder="Cantidad" min="1" required />
                  <input type="number" class="item-price" placeholder="Precio unitario" min="0" step="0.01" required />
                  <button type="button" class="btn-small btn-remove-item" title="Eliminar">×</button>
                </div>
              </div>
              <div style="margin-top:8px;">
                <button type="button" id="add-item" class="btn-ghost">Añadir item</button>
              </div>

              <div class="form-row" style="margin-top:12px">
                <label style="flex:1">
                  <span>Responsable</span>
                  <input type="text" id="responsable" readonly />
                </label>
                <label style="flex:1">
                  <span>Adjuntar factura</span>
                  <input type="file" id="factura" accept=".pdf,image/*" />
                </label>
              </div>

              <div style="margin-top:12px;display:flex;gap:8px">
                <button type="submit" class="btn-primary">Guardar compra</button>
                <button type="button" id="clear-form" class="btn-ghost">Limpiar</button>
              </div>
            </form>

            <hr />

            <!-- Filtros historial -->
            <div class="filters-row">
              <label><span>Proveedor</span><input id="filtro-proveedor" type="text" /></label>
              <label><span>Fecha</span><input id="filtro-fecha" type="date" /></label>
              <label><span>Destino</span>
                <select id="filtro-destino">
                  <option value="">Todos</option>
                  <option value="General">General</option>
                  <option value="Hotel Saildorf">Hotel Saildorf</option>
                  <option value="Hotel Brit">Hotel Brit</option>
                  <option value="Hotel Costanera">Hotel Costanera</option>
                </select>
              </label>
              <label><span>Producto</span><input id="filtro-producto" type="text" /></label>
            </div>

            <h3 style="margin-top:12px;">Historial de compras</h3>
            <div id="purchases-list" class="purchases-list"></div>
          </div>
        </section>
      </main>
    </div>

    <!-- jsPDF (CDN) para generar comprobantes PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="proveedores.js"></script>
  </body>
</html>
